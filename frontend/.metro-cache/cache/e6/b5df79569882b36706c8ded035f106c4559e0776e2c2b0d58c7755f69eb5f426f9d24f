{"dependencies":[{"name":"expo-image-picker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":29},"end":{"line":2,"column":49,"index":78}}],"key":"XQFgv2+WadF9xV+S67CI6D8lClA=","exportNames":["*"],"imports":1}},{"name":"expo-image-manipulator","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":79},"end":{"line":3,"column":69,"index":148}}],"key":"jSCgza62Lmd+veZCOu0xCYv/BW8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"compressImage\", {\n    enumerable: true,\n    get: function () {\n      return compressImage;\n    }\n  });\n  Object.defineProperty(exports, \"pickAndCompressImage\", {\n    enumerable: true,\n    get: function () {\n      return pickAndCompressImage;\n    }\n  });\n  Object.defineProperty(exports, \"getBase64ImageUri\", {\n    enumerable: true,\n    get: function () {\n      return getBase64ImageUri;\n    }\n  });\n  var _expoImagePicker = require(_dependencyMap[0], \"expo-image-picker\");\n  var ImagePicker = _interopNamespace(_expoImagePicker);\n  var _expoImageManipulator = require(_dependencyMap[1], \"expo-image-manipulator\");\n  // Image compression utility\n\n  const compressImage = async uri => {\n    try {\n      // Compress and resize image\n      const manipulatedImage = await (0, _expoImageManipulator.manipulateAsync)(uri, [{\n        resize: {\n          width: 800\n        }\n      } // Resize to max width of 800px\n      ], {\n        compress: 0.5,\n        // 50% quality\n        format: _expoImageManipulator.SaveFormat.JPEG,\n        base64: true\n      });\n      if (!manipulatedImage.base64) {\n        throw new Error('Failed to get base64');\n      }\n      return manipulatedImage.base64;\n    } catch (error) {\n      console.error('Image compression error:', error);\n      throw error;\n    }\n  };\n  const pickAndCompressImage = async () => {\n    try {\n      // Request permission\n      const {\n        status\n      } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        alert('Sorry, we need camera roll permissions to upload images!');\n        return null;\n      }\n\n      // Pick image\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 0.5,\n        base64: true\n      });\n      if (result.canceled || !result.assets[0]) {\n        return null;\n      }\n\n      // Check size (max ~500KB)\n      if (result.assets[0].base64) {\n        const sizeInBytes = result.assets[0].base64.length * 3 / 4;\n        if (sizeInBytes > 500000) {\n          // Further compress if larger than 500KB\n          return await compressImage(result.assets[0].uri);\n        }\n        return result.assets[0].base64;\n      }\n      return null;\n    } catch (error) {\n      console.error('Pick and compress image error:', error);\n      return null;\n    }\n  };\n  const getBase64ImageUri = base64 => {\n    if (base64.startsWith('data:')) {\n      return base64;\n    }\n    return `data:image/jpeg;base64,${base64}`;\n  };\n});","lineCount":112,"map":[[22,2,5,0,"Object"],[22,8,5,0],[22,9,5,0,"defineProperty"],[22,23,5,0],[22,24,5,0,"exports"],[22,31,5,0],[23,4,5,0,"enumerable"],[23,14,5,0],[24,4,5,0,"get"],[24,7,5,0],[24,18,5,0,"get"],[24,19,5,0],[25,6,5,0],[25,13,5,0,"compressImage"],[25,26,5,0],[26,4,5,0],[27,2,5,0],[28,2,31,0,"Object"],[28,8,31,0],[28,9,31,0,"defineProperty"],[28,23,31,0],[28,24,31,0,"exports"],[28,31,31,0],[29,4,31,0,"enumerable"],[29,14,31,0],[30,4,31,0,"get"],[30,7,31,0],[30,18,31,0,"get"],[30,19,31,0],[31,6,31,0],[31,13,31,0,"pickAndCompressImage"],[31,33,31,0],[32,4,31,0],[33,2,31,0],[34,2,70,0,"Object"],[34,8,70,0],[34,9,70,0,"defineProperty"],[34,23,70,0],[34,24,70,0,"exports"],[34,31,70,0],[35,4,70,0,"enumerable"],[35,14,70,0],[36,4,70,0,"get"],[36,7,70,0],[36,18,70,0,"get"],[36,19,70,0],[37,6,70,0],[37,13,70,0,"getBase64ImageUri"],[37,30,70,0],[38,4,70,0],[39,2,70,0],[40,2,2,0],[40,6,2,0,"_expoImagePicker"],[40,22,2,0],[40,25,2,0,"require"],[40,32,2,0],[40,33,2,0,"_dependencyMap"],[40,47,2,0],[41,2,2,0],[41,6,2,0,"ImagePicker"],[41,17,2,0],[41,20,2,0,"_interopNamespace"],[41,37,2,0],[41,38,2,0,"_expoImagePicker"],[41,54,2,0],[42,2,3,0],[42,6,3,0,"_expoImageManipulator"],[42,27,3,0],[42,30,3,0,"require"],[42,37,3,0],[42,38,3,0,"_dependencyMap"],[42,52,3,0],[43,2,1,0],[45,2,5,7],[45,8,5,13,"compressImage"],[45,21,5,26],[45,24,5,29],[45,30,5,36,"uri"],[45,33,5,47],[45,37,5,69],[46,4,6,2],[46,8,6,6],[47,6,7,4],[48,6,8,4],[48,12,8,10,"manipulatedImage"],[48,28,8,26],[48,31,8,29],[48,37,8,35],[48,41,8,35,"manipulateAsync"],[48,62,8,50],[48,63,8,50,"manipulateAsync"],[48,78,8,50],[48,80,9,6,"uri"],[48,83,9,9],[48,85,10,6],[48,86,11,8],[49,8,11,10,"resize"],[49,14,11,16],[49,16,11,18],[50,10,11,20,"width"],[50,15,11,25],[50,17,11,27],[51,8,11,31],[52,6,11,33],[52,7,11,34],[52,8,11,36],[53,6,11,36],[53,7,12,7],[53,9,13,6],[54,8,14,8,"compress"],[54,16,14,16],[54,18,14,18],[54,21,14,21],[55,8,14,23],[56,8,15,8,"format"],[56,14,15,14],[56,16,15,16,"SaveFormat"],[56,37,15,26],[56,38,15,26,"SaveFormat"],[56,48,15,26],[56,49,15,27,"JPEG"],[56,53,15,31],[57,8,16,8,"base64"],[57,14,16,14],[57,16,16,16],[58,6,17,6],[58,7,18,4],[58,8,18,5],[59,6,20,4],[59,10,20,8],[59,11,20,9,"manipulatedImage"],[59,27,20,25],[59,28,20,26,"base64"],[59,34,20,32],[59,36,20,34],[60,8,21,6],[60,14,21,12],[60,18,21,16,"Error"],[60,23,21,21],[60,24,21,22],[60,46,21,44],[60,47,21,45],[61,6,22,4],[62,6,24,4],[62,13,24,11,"manipulatedImage"],[62,29,24,27],[62,30,24,28,"base64"],[62,36,24,34],[63,4,25,2],[63,5,25,3],[63,6,25,4],[63,13,25,11,"error"],[63,18,25,16],[63,20,25,18],[64,6,26,4,"console"],[64,13,26,11],[64,14,26,12,"error"],[64,19,26,17],[64,20,26,18],[64,46,26,44],[64,48,26,46,"error"],[64,53,26,51],[64,54,26,52],[65,6,27,4],[65,12,27,10,"error"],[65,17,27,15],[66,4,28,2],[67,2,29,0],[67,3,29,1],[68,2,31,7],[68,8,31,13,"pickAndCompressImage"],[68,28,31,33],[68,31,31,36],[68,37,31,36,"pickAndCompressImage"],[68,38,31,36],[68,43,31,72],[69,4,32,2],[69,8,32,6],[70,6,33,4],[71,6,34,4],[71,12,34,10],[72,8,34,12,"status"],[73,6,34,19],[73,7,34,20],[73,10,34,23],[73,16,34,29,"ImagePicker"],[73,27,34,40],[73,28,34,41,"requestMediaLibraryPermissionsAsync"],[73,63,34,76],[73,64,34,77],[73,65,34,78],[74,6,35,4],[74,10,35,8,"status"],[74,16,35,14],[74,21,35,19],[74,30,35,28],[74,32,35,30],[75,8,36,6,"alert"],[75,13,36,11],[75,14,36,12],[75,72,36,70],[75,73,36,71],[76,8,37,6],[76,15,37,13],[76,19,37,17],[77,6,38,4],[79,6,40,4],[80,6,41,4],[80,12,41,10,"result"],[80,18,41,16],[80,21,41,19],[80,27,41,25,"ImagePicker"],[80,38,41,36],[80,39,41,37,"launchImageLibraryAsync"],[80,62,41,60],[80,63,41,61],[81,8,42,6,"mediaTypes"],[81,18,42,16],[81,20,42,18,"ImagePicker"],[81,31,42,29],[81,32,42,30,"MediaTypeOptions"],[81,48,42,46],[81,49,42,47,"Images"],[81,55,42,53],[82,8,43,6,"allowsEditing"],[82,21,43,19],[82,23,43,21],[82,27,43,25],[83,8,44,6,"aspect"],[83,14,44,12],[83,16,44,14],[83,17,44,15],[83,18,44,16],[83,20,44,18],[83,21,44,19],[83,22,44,20],[84,8,45,6,"quality"],[84,15,45,13],[84,17,45,15],[84,20,45,18],[85,8,46,6,"base64"],[85,14,46,12],[85,16,46,14],[86,6,47,4],[86,7,47,5],[86,8,47,6],[87,6,49,4],[87,10,49,8,"result"],[87,16,49,14],[87,17,49,15,"canceled"],[87,25,49,23],[87,29,49,27],[87,30,49,28,"result"],[87,36,49,34],[87,37,49,35,"assets"],[87,43,49,41],[87,44,49,42],[87,45,49,43],[87,46,49,44],[87,48,49,46],[88,8,50,6],[88,15,50,13],[88,19,50,17],[89,6,51,4],[91,6,53,4],[92,6,54,4],[92,10,54,8,"result"],[92,16,54,14],[92,17,54,15,"assets"],[92,23,54,21],[92,24,54,22],[92,25,54,23],[92,26,54,24],[92,27,54,25,"base64"],[92,33,54,31],[92,35,54,33],[93,8,55,6],[93,14,55,12,"sizeInBytes"],[93,25,55,23],[93,28,55,27,"result"],[93,34,55,33],[93,35,55,34,"assets"],[93,41,55,40],[93,42,55,41],[93,43,55,42],[93,44,55,43],[93,45,55,44,"base64"],[93,51,55,50],[93,52,55,51,"length"],[93,58,55,57],[93,61,55,60],[93,62,55,61],[93,65,55,65],[93,66,55,66],[94,8,56,6],[94,12,56,10,"sizeInBytes"],[94,23,56,21],[94,26,56,24],[94,32,56,30],[94,34,56,32],[95,10,57,8],[96,10,58,8],[96,17,58,15],[96,23,58,21,"compressImage"],[96,36,58,34],[96,37,58,35,"result"],[96,43,58,41],[96,44,58,42,"assets"],[96,50,58,48],[96,51,58,49],[96,52,58,50],[96,53,58,51],[96,54,58,52,"uri"],[96,57,58,55],[96,58,58,56],[97,8,59,6],[98,8,60,6],[98,15,60,13,"result"],[98,21,60,19],[98,22,60,20,"assets"],[98,28,60,26],[98,29,60,27],[98,30,60,28],[98,31,60,29],[98,32,60,30,"base64"],[98,38,60,36],[99,6,61,4],[100,6,63,4],[100,13,63,11],[100,17,63,15],[101,4,64,2],[101,5,64,3],[101,6,64,4],[101,13,64,11,"error"],[101,18,64,16],[101,20,64,18],[102,6,65,4,"console"],[102,13,65,11],[102,14,65,12,"error"],[102,19,65,17],[102,20,65,18],[102,52,65,50],[102,54,65,52,"error"],[102,59,65,57],[102,60,65,58],[103,6,66,4],[103,13,66,11],[103,17,66,15],[104,4,67,2],[105,2,68,0],[105,3,68,1],[106,2,70,7],[106,8,70,13,"getBase64ImageUri"],[106,25,70,30],[106,28,70,34,"base64"],[106,34,70,48],[106,38,70,61],[107,4,71,2],[107,8,71,6,"base64"],[107,14,71,12],[107,15,71,13,"startsWith"],[107,25,71,23],[107,26,71,24],[107,33,71,31],[107,34,71,32],[107,36,71,34],[108,6,72,4],[108,13,72,11,"base64"],[108,19,72,17],[109,4,73,2],[110,4,74,2],[110,11,74,9],[110,37,74,35,"base64"],[110,43,74,41],[110,45,74,43],[111,2,75,0],[111,3,75,1],[112,0,75,2],[112,3]],"functionMap":{"names":["<global>","compressImage","pickAndCompressImage","getBase64ImageUri"],"mappings":"AAA;6BCI;CDwB;oCEE;CFqC;iCGE;CHK"},"hasCjsExports":false},"type":"js/module"}]}