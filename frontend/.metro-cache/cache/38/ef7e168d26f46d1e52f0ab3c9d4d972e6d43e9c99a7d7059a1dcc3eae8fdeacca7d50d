{"dependencies":[{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"socketService\", {\n    enumerable: true,\n    get: function () {\n      return socketService;\n    }\n  });\n  var _socketIoClient = require(_dependencyMap[0], \"socket.io-client\");\n  const SOCKET_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n  class SocketService {\n    socket = null;\n    listeners = [];\n    connect(userId) {\n      if (this.socket?.connected) return;\n      this.socket = (0, _socketIoClient.io)(SOCKET_URL, {\n        transports: ['websocket'],\n        reconnection: true\n      });\n      this.socket.on('connect', () => {\n        console.log('Socket connected');\n        this.socket?.emit('join_user_room', {\n          user_id: userId\n        });\n      });\n      this.socket.on('disconnect', () => {\n        console.log('Socket disconnected');\n      });\n      this.socket.on('notification', data => {\n        console.log('New notification:', data);\n        this.notifyListeners(data);\n      });\n    }\n    disconnect() {\n      if (this.socket) {\n        this.socket.disconnect();\n        this.socket = null;\n      }\n    }\n    onNotification(callback) {\n      this.listeners.push(callback);\n    }\n    offNotification(callback) {\n      this.listeners = this.listeners.filter(l => l !== callback);\n    }\n    notifyListeners(data) {\n      this.listeners.forEach(listener => listener(data));\n    }\n  }\n  const socketService = new SocketService();\n});","lineCount":55,"map":[[7,2,52,0,"Object"],[7,8,52,0],[7,9,52,0,"defineProperty"],[7,23,52,0],[7,24,52,0,"exports"],[7,31,52,0],[8,4,52,0,"enumerable"],[8,14,52,0],[9,4,52,0,"get"],[9,7,52,0],[9,18,52,0,"get"],[9,19,52,0],[10,6,52,0],[10,13,52,0,"socketService"],[10,26,52,0],[11,4,52,0],[12,2,52,0],[13,2,1,0],[13,6,1,0,"_socketIoClient"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,3,0],[14,8,3,6,"SOCKET_URL"],[14,18,3,16],[14,21,3,19,"process"],[14,28,3,26],[14,29,3,27,"env"],[14,32,3,30],[14,33,3,31,"EXPO_PUBLIC_BACKEND_URL"],[14,56,3,54],[14,60,3,58],[14,83,3,81],[15,2,5,0],[15,8,5,6,"SocketService"],[15,21,5,19],[15,22,5,20],[16,4,6,12,"socket"],[16,10,6,18],[16,13,6,36],[16,17,6,40],[17,4,7,12,"listeners"],[17,13,7,21],[17,16,7,57],[17,18,7,59],[18,4,9,4,"connect"],[18,11,9,11,"connect"],[18,12,9,12,"userId"],[18,18,9,26],[18,20,9,28],[19,6,10,8],[19,10,10,12],[19,14,10,16],[19,15,10,17,"socket"],[19,21,10,23],[19,23,10,25,"connected"],[19,32,10,34],[19,34,10,36],[20,6,12,8],[20,10,12,12],[20,11,12,13,"socket"],[20,17,12,19],[20,20,12,22],[20,24,12,22,"io"],[20,39,12,24],[20,40,12,24,"io"],[20,42,12,24],[20,44,12,25,"SOCKET_URL"],[20,54,12,35],[20,56,12,37],[21,8,13,12,"transports"],[21,18,13,22],[21,20,13,24],[21,21,13,25],[21,32,13,36],[21,33,13,37],[22,8,14,12,"reconnection"],[22,20,14,24],[22,22,14,26],[23,6,15,8],[23,7,15,9],[23,8,15,10],[24,6,17,8],[24,10,17,12],[24,11,17,13,"socket"],[24,17,17,19],[24,18,17,20,"on"],[24,20,17,22],[24,21,17,23],[24,30,17,32],[24,32,17,34],[24,38,17,40],[25,8,18,12,"console"],[25,15,18,19],[25,16,18,20,"log"],[25,19,18,23],[25,20,18,24],[25,38,18,42],[25,39,18,43],[26,8,19,12],[26,12,19,16],[26,13,19,17,"socket"],[26,19,19,23],[26,21,19,25,"emit"],[26,25,19,29],[26,26,19,30],[26,42,19,46],[26,44,19,48],[27,10,19,50,"user_id"],[27,17,19,57],[27,19,19,59,"userId"],[28,8,19,66],[28,9,19,67],[28,10,19,68],[29,6,20,8],[29,7,20,9],[29,8,20,10],[30,6,22,8],[30,10,22,12],[30,11,22,13,"socket"],[30,17,22,19],[30,18,22,20,"on"],[30,20,22,22],[30,21,22,23],[30,33,22,35],[30,35,22,37],[30,41,22,43],[31,8,23,12,"console"],[31,15,23,19],[31,16,23,20,"log"],[31,19,23,23],[31,20,23,24],[31,41,23,45],[31,42,23,46],[32,6,24,8],[32,7,24,9],[32,8,24,10],[33,6,26,8],[33,10,26,12],[33,11,26,13,"socket"],[33,17,26,19],[33,18,26,20,"on"],[33,20,26,22],[33,21,26,23],[33,35,26,37],[33,37,26,40,"data"],[33,41,26,44],[33,45,26,49],[34,8,27,12,"console"],[34,15,27,19],[34,16,27,20,"log"],[34,19,27,23],[34,20,27,24],[34,39,27,43],[34,41,27,45,"data"],[34,45,27,49],[34,46,27,50],[35,8,28,12],[35,12,28,16],[35,13,28,17,"notifyListeners"],[35,28,28,32],[35,29,28,33,"data"],[35,33,28,37],[35,34,28,38],[36,6,29,8],[36,7,29,9],[36,8,29,10],[37,4,30,4],[38,4,32,4,"disconnect"],[38,14,32,14,"disconnect"],[38,15,32,14],[38,17,32,17],[39,6,33,8],[39,10,33,12],[39,14,33,16],[39,15,33,17,"socket"],[39,21,33,23],[39,23,33,25],[40,8,34,12],[40,12,34,16],[40,13,34,17,"socket"],[40,19,34,23],[40,20,34,24,"disconnect"],[40,30,34,34],[40,31,34,35],[40,32,34,36],[41,8,35,12],[41,12,35,16],[41,13,35,17,"socket"],[41,19,35,23],[41,22,35,26],[41,26,35,30],[42,6,36,8],[43,4,37,4],[44,4,39,4,"onNotification"],[44,18,39,18,"onNotification"],[44,19,39,19,"callback"],[44,27,39,56],[44,29,39,58],[45,6,40,8],[45,10,40,12],[45,11,40,13,"listeners"],[45,20,40,22],[45,21,40,23,"push"],[45,25,40,27],[45,26,40,28,"callback"],[45,34,40,36],[45,35,40,37],[46,4,41,4],[47,4,43,4,"offNotification"],[47,19,43,19,"offNotification"],[47,20,43,20,"callback"],[47,28,43,57],[47,30,43,59],[48,6,44,8],[48,10,44,12],[48,11,44,13,"listeners"],[48,20,44,22],[48,23,44,25],[48,27,44,29],[48,28,44,30,"listeners"],[48,37,44,39],[48,38,44,40,"filter"],[48,44,44,46],[48,45,44,48,"l"],[48,46,44,49],[48,50,44,54,"l"],[48,51,44,55],[48,56,44,60,"callback"],[48,64,44,68],[48,65,44,69],[49,4,45,4],[50,4,47,12,"notifyListeners"],[50,19,47,27,"notifyListeners"],[50,20,47,28,"data"],[50,24,47,37],[50,26,47,39],[51,6,48,8],[51,10,48,12],[51,11,48,13,"listeners"],[51,20,48,22],[51,21,48,23,"forEach"],[51,28,48,30],[51,29,48,32,"listener"],[51,37,48,40],[51,41,48,45,"listener"],[51,49,48,53],[51,50,48,54,"data"],[51,54,48,58],[51,55,48,59],[51,56,48,60],[52,4,49,4],[53,2,50,0],[54,2,52,7],[54,8,52,13,"socketService"],[54,21,52,26],[54,24,52,29],[54,28,52,33,"SocketService"],[54,41,52,46],[54,42,52,47],[54,43,52,48],[55,0,52,49],[55,3]],"functionMap":{"names":["<global>","SocketService","SocketService#connect","on$argument_1","SocketService#disconnect","SocketService#onNotification","SocketService#offNotification","listeners.filter$argument_0","SocketService#notifyListeners","listeners.forEach$argument_0"],"mappings":"AAA;ACI;ICI;kCCQ;SDG;qCCE;SDE;uCCE;SDG;KDC;IGE;KHK;IIE;KJE;IKE;+CCC,qBD;KLC;IOE;+BCC,4BD;KPC;CDC"},"hasCjsExports":false},"type":"js/module"}]}