{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"socketService\", {\n    enumerable: true,\n    get: function () {\n      return socketService;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _socketIoClient = require(_dependencyMap[1], \"socket.io-client\");\n  const SOCKET_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n  class SocketService {\n    socket = null;\n    listeners = [];\n    connect(userId) {\n      if (this.socket?.connected) return;\n      this.socket = (0, _socketIoClient.io)(SOCKET_URL, {\n        transports: ['websocket'],\n        reconnection: true\n      });\n      this.socket.on('connect', () => {\n        console.log('Socket connected');\n        this.socket?.emit('join_user_room', {\n          user_id: userId\n        });\n      });\n      this.socket.on('disconnect', () => {\n        console.log('Socket disconnected');\n      });\n      this.socket.on('notification', data => {\n        console.log('New notification:', data);\n        this.notifyListeners(data);\n      });\n    }\n    disconnect() {\n      if (this.socket) {\n        this.socket.disconnect();\n        this.socket = null;\n      }\n    }\n    onNotification(callback) {\n      this.listeners.push(callback);\n    }\n    offNotification(callback) {\n      this.listeners = this.listeners.filter(l => l !== callback);\n    }\n    notifyListeners(data) {\n      this.listeners.forEach(listener => listener(data));\n    }\n  }\n  const socketService = new SocketService();\n});","lineCount":56,"map":[[7,2,52,0,"Object"],[7,8,52,0],[7,9,52,0,"defineProperty"],[7,23,52,0],[7,24,52,0,"exports"],[7,31,52,0],[8,4,52,0,"enumerable"],[8,14,52,0],[9,4,52,0,"get"],[9,7,52,0],[9,18,52,0,"get"],[9,19,52,0],[10,6,52,0],[10,13,52,0,"socketService"],[10,26,52,0],[11,4,52,0],[12,2,52,0],[13,2,52,49],[13,6,52,49,"_expoVirtualEnv"],[13,21,52,49],[13,24,52,49,"require"],[13,31,52,49],[13,32,52,49,"_dependencyMap"],[13,46,52,49],[14,2,1,0],[14,6,1,0,"_socketIoClient"],[14,21,1,0],[14,24,1,0,"require"],[14,31,1,0],[14,32,1,0,"_dependencyMap"],[14,46,1,0],[15,2,3,0],[15,8,3,6,"SOCKET_URL"],[15,18,3,16],[15,21,3,19,"_expoVirtualEnv"],[15,36,3,19],[15,37,3,19,"env"],[15,40,3,19],[15,41,3,19,"EXPO_PUBLIC_BACKEND_URL"],[15,64,3,19],[15,68,3,58],[15,91,3,81],[16,2,5,0],[16,8,5,6,"SocketService"],[16,21,5,19],[16,22,5,20],[17,4,6,12,"socket"],[17,10,6,18],[17,13,6,36],[17,17,6,40],[18,4,7,12,"listeners"],[18,13,7,21],[18,16,7,57],[18,18,7,59],[19,4,9,4,"connect"],[19,11,9,11,"connect"],[19,12,9,12,"userId"],[19,18,9,26],[19,20,9,28],[20,6,10,8],[20,10,10,12],[20,14,10,16],[20,15,10,17,"socket"],[20,21,10,23],[20,23,10,25,"connected"],[20,32,10,34],[20,34,10,36],[21,6,12,8],[21,10,12,12],[21,11,12,13,"socket"],[21,17,12,19],[21,20,12,22],[21,24,12,22,"io"],[21,39,12,24],[21,40,12,24,"io"],[21,42,12,24],[21,44,12,25,"SOCKET_URL"],[21,54,12,35],[21,56,12,37],[22,8,13,12,"transports"],[22,18,13,22],[22,20,13,24],[22,21,13,25],[22,32,13,36],[22,33,13,37],[23,8,14,12,"reconnection"],[23,20,14,24],[23,22,14,26],[24,6,15,8],[24,7,15,9],[24,8,15,10],[25,6,17,8],[25,10,17,12],[25,11,17,13,"socket"],[25,17,17,19],[25,18,17,20,"on"],[25,20,17,22],[25,21,17,23],[25,30,17,32],[25,32,17,34],[25,38,17,40],[26,8,18,12,"console"],[26,15,18,19],[26,16,18,20,"log"],[26,19,18,23],[26,20,18,24],[26,38,18,42],[26,39,18,43],[27,8,19,12],[27,12,19,16],[27,13,19,17,"socket"],[27,19,19,23],[27,21,19,25,"emit"],[27,25,19,29],[27,26,19,30],[27,42,19,46],[27,44,19,48],[28,10,19,50,"user_id"],[28,17,19,57],[28,19,19,59,"userId"],[29,8,19,66],[29,9,19,67],[29,10,19,68],[30,6,20,8],[30,7,20,9],[30,8,20,10],[31,6,22,8],[31,10,22,12],[31,11,22,13,"socket"],[31,17,22,19],[31,18,22,20,"on"],[31,20,22,22],[31,21,22,23],[31,33,22,35],[31,35,22,37],[31,41,22,43],[32,8,23,12,"console"],[32,15,23,19],[32,16,23,20,"log"],[32,19,23,23],[32,20,23,24],[32,41,23,45],[32,42,23,46],[33,6,24,8],[33,7,24,9],[33,8,24,10],[34,6,26,8],[34,10,26,12],[34,11,26,13,"socket"],[34,17,26,19],[34,18,26,20,"on"],[34,20,26,22],[34,21,26,23],[34,35,26,37],[34,37,26,40,"data"],[34,41,26,44],[34,45,26,49],[35,8,27,12,"console"],[35,15,27,19],[35,16,27,20,"log"],[35,19,27,23],[35,20,27,24],[35,39,27,43],[35,41,27,45,"data"],[35,45,27,49],[35,46,27,50],[36,8,28,12],[36,12,28,16],[36,13,28,17,"notifyListeners"],[36,28,28,32],[36,29,28,33,"data"],[36,33,28,37],[36,34,28,38],[37,6,29,8],[37,7,29,9],[37,8,29,10],[38,4,30,4],[39,4,32,4,"disconnect"],[39,14,32,14,"disconnect"],[39,15,32,14],[39,17,32,17],[40,6,33,8],[40,10,33,12],[40,14,33,16],[40,15,33,17,"socket"],[40,21,33,23],[40,23,33,25],[41,8,34,12],[41,12,34,16],[41,13,34,17,"socket"],[41,19,34,23],[41,20,34,24,"disconnect"],[41,30,34,34],[41,31,34,35],[41,32,34,36],[42,8,35,12],[42,12,35,16],[42,13,35,17,"socket"],[42,19,35,23],[42,22,35,26],[42,26,35,30],[43,6,36,8],[44,4,37,4],[45,4,39,4,"onNotification"],[45,18,39,18,"onNotification"],[45,19,39,19,"callback"],[45,27,39,56],[45,29,39,58],[46,6,40,8],[46,10,40,12],[46,11,40,13,"listeners"],[46,20,40,22],[46,21,40,23,"push"],[46,25,40,27],[46,26,40,28,"callback"],[46,34,40,36],[46,35,40,37],[47,4,41,4],[48,4,43,4,"offNotification"],[48,19,43,19,"offNotification"],[48,20,43,20,"callback"],[48,28,43,57],[48,30,43,59],[49,6,44,8],[49,10,44,12],[49,11,44,13,"listeners"],[49,20,44,22],[49,23,44,25],[49,27,44,29],[49,28,44,30,"listeners"],[49,37,44,39],[49,38,44,40,"filter"],[49,44,44,46],[49,45,44,48,"l"],[49,46,44,49],[49,50,44,54,"l"],[49,51,44,55],[49,56,44,60,"callback"],[49,64,44,68],[49,65,44,69],[50,4,45,4],[51,4,47,12,"notifyListeners"],[51,19,47,27,"notifyListeners"],[51,20,47,28,"data"],[51,24,47,37],[51,26,47,39],[52,6,48,8],[52,10,48,12],[52,11,48,13,"listeners"],[52,20,48,22],[52,21,48,23,"forEach"],[52,28,48,30],[52,29,48,32,"listener"],[52,37,48,40],[52,41,48,45,"listener"],[52,49,48,53],[52,50,48,54,"data"],[52,54,48,58],[52,55,48,59],[52,56,48,60],[53,4,49,4],[54,2,50,0],[55,2,52,7],[55,8,52,13,"socketService"],[55,21,52,26],[55,24,52,29],[55,28,52,33,"SocketService"],[55,41,52,46],[55,42,52,47],[55,43,52,48],[56,0,52,49],[56,3]],"functionMap":{"names":["<global>","SocketService","SocketService#connect","on$argument_1","SocketService#disconnect","SocketService#onNotification","SocketService#offNotification","listeners.filter$argument_0","SocketService#notifyListeners","listeners.forEach$argument_0"],"mappings":"AAA;ACI;ICI;kCCQ;SDG;qCCE;SDE;uCCE;SDG;KDC;IGE;KHK;IIE;KJE;IKE;+CCC,qBD;KLC;IOE;+BCC,4BD;KPC;CDC"},"hasCjsExports":false},"type":"js/module"}]}